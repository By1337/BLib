package chat;

import org.by1337.blib.chat.*;
import org.by1337.blib.chat.Component;
import org.by1337.blib.chat.hover.HoverEvent;
import org.by1337.blib.chat.hover.HoverEventContentsString;
import org.junit.Assert;
import org.junit.Test;

import java.awt.*;

public class ClickEventTest {
    @Test
    public void buildTest(){
        ComponentBuilder componentBuilder = new ComponentBuilder()
                .component(new Component(new ChatColor(Color.CYAN), "text").bold(true).italic(true).clickEvent(new ClickEvent(ClickEventType.RUN_COMMAND, "/run test")).hoverEvent(new HoverEvent( new HoverEventContentsString("don't click"))))
                .component(new Component(new ChatColor(Color.CYAN), "text").bold(true).italic(true).clickEvent(new ClickEvent(ClickEventType.RUN_COMMAND, "/run test")).hoverEvent(new HoverEvent( new HoverEventContentsString("don't click"))))
                .component(new Component(new ChatColor(Color.CYAN), "text").bold(true).italic(true).clickEvent(new ClickEvent(ClickEventType.RUN_COMMAND, "/run test")).hoverEvent(new HoverEvent( new HoverEventContentsString("don't click"))))
                .component(new Component(new ChatColor(Color.CYAN), "text").bold(true).italic(true).clickEvent(new ClickEvent(ClickEventType.RUN_COMMAND, "/run test")).hoverEvent(new HoverEvent( new HoverEventContentsString("don't click"))))
                .component(new Component(new ChatColor(Color.CYAN), "text").bold(true).italic(true).clickEvent(new ClickEvent(ClickEventType.RUN_COMMAND, "/run test")).hoverEvent(new HoverEvent( new HoverEventContentsString("don't click"))))
                .component(new Component(new ChatColor(Color.CYAN), "text").bold(true).italic(true).clickEvent(new ClickEvent(ClickEventType.RUN_COMMAND, "/run test")).hoverEvent(new HoverEvent( new HoverEventContentsString("don't click"))))
                .component(new Component(new ChatColor(Color.CYAN), "text").bold(true).italic(true).clickEvent(new ClickEvent(ClickEventType.RUN_COMMAND, "/run test")).hoverEvent(new HoverEvent( new HoverEventContentsString("don't click"))))
                .component(new Component(new ChatColor(Color.CYAN), "text").bold(true).italic(true).clickEvent(new ClickEvent(ClickEventType.RUN_COMMAND, "/run test")).hoverEvent(new HoverEvent( new HoverEventContentsString("don't click"))));

        Assert.assertEquals(componentBuilder.build(), "[\"\",{\"text\":\"text\",\"bold\":true,\"italic\":true,\"color\":\"#00ffff\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\": \"don't click\"},\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/run test\"}},{\"text\":\"text\",\"bold\":true,\"italic\":true,\"color\":\"#00ffff\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\": \"don't click\"},\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/run test\"}},{\"text\":\"text\",\"bold\":true,\"italic\":true,\"color\":\"#00ffff\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\": \"don't click\"},\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/run test\"}},{\"text\":\"text\",\"bold\":true,\"italic\":true,\"color\":\"#00ffff\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\": \"don't click\"},\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/run test\"}},{\"text\":\"text\",\"bold\":true,\"italic\":true,\"color\":\"#00ffff\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\": \"don't click\"},\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/run test\"}},{\"text\":\"text\",\"bold\":true,\"italic\":true,\"color\":\"#00ffff\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\": \"don't click\"},\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/run test\"}},{\"text\":\"text\",\"bold\":true,\"italic\":true,\"color\":\"#00ffff\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\": \"don't click\"},\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/run test\"}},{\"text\":\"text\",\"bold\":true,\"italic\":true,\"color\":\"#00ffff\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\": \"don't click\"},\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/run test\"}}]");
    }

    @Test
    public void toSourceTest(){
        String jsonString = "[\"\",{\"text\":\"\\n\"},{\"text\":\"/bair help\",\"color\":\"aqua\",\"clickEvent\":{\"action\":\"suggest_command\",\"value\":\"/bair help\"},\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair help\"}},{\"text\":\" - \"},{\"text\":\"Command Help\",\"color\":\"white\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"Displays a summary of all commands\"}},{\"text\":\"\\n\"},{\"text\":\"/bair list\",\"color\":\"aqua\",\"clickEvent\":{\"action\":\"suggest_command\",\"value\":\"/bair list\"},\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair list\"}},{\"text\":\" - \"},{\"text\":\"displays a list of airdrops\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"Displays a list of airdrops, you can click on them too!\"}},{\"text\":\"\\n\"},{\"text\":\"/bair compass [<give/remove>]\",\"color\":\"aqua\",\"clickEvent\":{\"action\":\"suggest_command\",\"value\":\"/bair compass\"},\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair compass\"}},{\"text\":\" - \"},{\"text\":\"give/take away compass\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"Allows you to give a compass,which will indicate the path to airdrop\"}},{\"text\":\"\\n\"},{\"text\":\"/bair delete [<airdrop id>]\",\"color\":\"aqua\",\"clickEvent\":{\"action\":\"suggest_command\",\"value\":\"/bair delete\"},\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair delete\"}},{\"text\":\" - \"},{\"text\":\"Removing an airdrop\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"You can delete an airdrop by specifying its ID\"}},{\"text\":\"\\n\"},{\"text\":\"/bair summoner give [<item id>]\",\"color\":\"aqua\",\"clickEvent\":{\"action\":\"suggest_command\",\"value\":\"/bair summoner give\"},\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair summoner give\"}},{\"text\":\" - \",\"color\":\"white\"},{\"text\":\"Gives an airdrop summon item to the player\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair summoner give [<item>] [<amount>] [<player>]\"}},{\"text\":\"\\n\"},{\"text\":\"/bair reload\",\"color\":\"aqua\",\"clickEvent\":{\"action\":\"suggest_command\",\"value\":\"/bair reload\"},\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair reload\"}},{\"text\":\" - \"},{\"text\":\"Reloads the plugin\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"What else can I say?\"}},{\"text\":\"\\n\"},{\"text\":\"/bair menu [<airdrop id>]\",\"color\":\"aqua\",\"clickEvent\":{\"action\":\"suggest_command\",\"value\":\"/bair menu\"},\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair menu\"}},{\"text\":\" - \"},{\"text\":\"Opens the airdrop editing menu\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"Can be entered without specifying an airdrop\"}},{\"text\":\"\\n\"},{\"text\":\"/bair create [<airdrop id>]\",\"color\":\"aqua\",\"clickEvent\":{\"action\":\"suggest_command\",\"value\":\"/bair create\"},\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair create\"}},{\"text\":\" - \",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair create\"}},{\"text\":\"Creates a new airdrop with the specified id\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"Only ^[a-zA-Z0-9-_]+$ are allowed\"}},{\"text\":\"\\n\"},{\"text\":\"/bair start [<airdrop id>]\",\"color\":\"aqua\",\"clickEvent\":{\"action\":\"suggest_command\",\"value\":\"/bair start\"},\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair start\"}},{\"text\":\" - \",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair start\"}},{\"text\":\"Launches an airdrop\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"You can specify coordinates and the world in the command!/bair start default ~ ~ ~ world\"}},{\"text\":\"\\n\"},{\"text\":\"/bair stop [<airdrop id>]\",\"color\":\"aqua\",\"clickEvent\":{\"action\":\"suggest_command\",\"value\":\"/bair stop\"},\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair stop\"}},{\"text\":\" - \",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair stop\"}},{\"text\":\"Stops the airdrop\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"Yes indeed it stops the airdrop\"}},{\"text\":\"\\n\"},{\"text\":\"/bair clone [<airdrop new id>] [<old airdrop>]\",\"color\":\"aqua\",\"clickEvent\":{\"action\":\"suggest_command\",\"value\":\"/bair clone\"},\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair clone\"}},{\"text\":\" - \"},{\"text\":\"Creates a clone of an airdrop\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"You can make it temporary using the -temp flag\"}},{\"text\":\"\\n\"},{\"text\":\"/bair tp [<airdrop id>]\",\"color\":\"aqua\",\"clickEvent\":{\"action\":\"suggest_command\",\"value\":\"/bair tp\"},\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair tp\"}},{\"text\":\" - \"},{\"text\":\"Teleports to the airdrop\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"or not?\"}},{\"text\":\"\\n\"},{\"text\":\"/bair listeners [<airdrop id>]\",\"color\":\"aqua\",\"clickEvent\":{\"action\":\"suggest_command\",\"value\":\"/bair listeners\"},\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair listeners\"}},{\"text\":\" - \",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair listeners\"}},{\"text\":\"Shows a list of airdrop listeners\\n\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"Listeners can unsubscribe and subscribe to the airdrop!\"}},{\"text\":\"/bair generate [<airdrop id>]\",\"color\":\"aqua\",\"clickEvent\":{\"action\":\"suggest_command\",\"value\":\"/bair generate\"},\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair generate\"}},{\"text\":\" - \",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"/bair generate\"}},{\"text\":\"Generates locations in advance!\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":\"Pre-generation Allows you to reduce the load on the server!\"}}]";
        ComponentBuilder componentBuilder = new ComponentBuilder();
        componentBuilder.parse(jsonString);
        Assert.assertEquals(componentBuilder.toSource(), "new ComponentBuilder()\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"\\n\"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#55ffff\"), \"/bair help\").clickEvent(new ClickEvent(ClickEventType.SUGGEST_COMMAND, \"/bair help\")).hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair help\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \" - \"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"Command Help\").hoverEvent(new HoverEvent(new HoverEventContentsString(\"Displays a summary of all commands\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"\\n\"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#55ffff\"), \"/bair list\").clickEvent(new ClickEvent(ClickEventType.SUGGEST_COMMAND, \"/bair list\")).hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair list\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \" - \"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"displays a list of airdrops\").hoverEvent(new HoverEvent(new HoverEventContentsString(\"Displays a list of airdrops, you can click on them too!\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"\\n\"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#55ffff\"), \"/bair compass [<give/remove>]\").clickEvent(new ClickEvent(ClickEventType.SUGGEST_COMMAND, \"/bair compass\")).hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair compass\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \" - \"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"give/take away compass\").hoverEvent(new HoverEvent(new HoverEventContentsString(\"Allows you to give a compass,which will indicate the path to airdrop\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"\\n\"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#55ffff\"), \"/bair delete [<airdrop id>]\").clickEvent(new ClickEvent(ClickEventType.SUGGEST_COMMAND, \"/bair delete\")).hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair delete\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \" - \"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"Removing an airdrop\").hoverEvent(new HoverEvent(new HoverEventContentsString(\"You can delete an airdrop by specifying its ID\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"\\n\"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#55ffff\"), \"/bair summoner give [<item id>]\").clickEvent(new ClickEvent(ClickEventType.SUGGEST_COMMAND, \"/bair summoner give\")).hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair summoner give\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \" - \"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"Gives an airdrop summon item to the player\").hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair summoner give [<item>] [<amount>] [<player>]\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"\\n\"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#55ffff\"), \"/bair reload\").clickEvent(new ClickEvent(ClickEventType.SUGGEST_COMMAND, \"/bair reload\")).hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair reload\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \" - \"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"Reloads the plugin\").hoverEvent(new HoverEvent(new HoverEventContentsString(\"What else can I say?\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"\\n\"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#55ffff\"), \"/bair menu [<airdrop id>]\").clickEvent(new ClickEvent(ClickEventType.SUGGEST_COMMAND, \"/bair menu\")).hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair menu\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \" - \"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"Opens the airdrop editing menu\").hoverEvent(new HoverEvent(new HoverEventContentsString(\"Can be entered without specifying an airdrop\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"\\n\"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#55ffff\"), \"/bair create [<airdrop id>]\").clickEvent(new ClickEvent(ClickEventType.SUGGEST_COMMAND, \"/bair create\")).hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair create\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \" - \").hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair create\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"Creates a new airdrop with the specified id\").hoverEvent(new HoverEvent(new HoverEventContentsString(\"Only ^[a-zA-Z0-9-_]+$ are allowed\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"\\n\"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#55ffff\"), \"/bair start [<airdrop id>]\").clickEvent(new ClickEvent(ClickEventType.SUGGEST_COMMAND, \"/bair start\")).hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair start\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \" - \").hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair start\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"Launches an airdrop\").hoverEvent(new HoverEvent(new HoverEventContentsString(\"You can specify coordinates and the world in the command!/bair start default ~ ~ ~ world\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"\\n\"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#55ffff\"), \"/bair stop [<airdrop id>]\").clickEvent(new ClickEvent(ClickEventType.SUGGEST_COMMAND, \"/bair stop\")).hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair stop\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \" - \").hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair stop\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"Stops the airdrop\").hoverEvent(new HoverEvent(new HoverEventContentsString(\"Yes indeed it stops the airdrop\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"\\n\"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#55ffff\"), \"/bair clone [<airdrop new id>] [<old airdrop>]\").clickEvent(new ClickEvent(ClickEventType.SUGGEST_COMMAND, \"/bair clone\")).hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair clone\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \" - \"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"Creates a clone of an airdrop\").hoverEvent(new HoverEvent(new HoverEventContentsString(\"You can make it temporary using the -temp flag\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"\\n\"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#55ffff\"), \"/bair tp [<airdrop id>]\").clickEvent(new ClickEvent(ClickEventType.SUGGEST_COMMAND, \"/bair tp\")).hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair tp\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \" - \"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"Teleports to the airdrop\").hoverEvent(new HoverEvent(new HoverEventContentsString(\"or not?\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"\\n\"))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#55ffff\"), \"/bair listeners [<airdrop id>]\").clickEvent(new ClickEvent(ClickEventType.SUGGEST_COMMAND, \"/bair listeners\")).hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair listeners\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \" - \").hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair listeners\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"Shows a list of airdrop listeners\\n\").hoverEvent(new HoverEvent(new HoverEventContentsString(\"Listeners can unsubscribe and subscribe to the airdrop!\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#55ffff\"), \"/bair generate [<airdrop id>]\").clickEvent(new ClickEvent(ClickEventType.SUGGEST_COMMAND, \"/bair generate\")).hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair generate\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \" - \").hoverEvent(new HoverEvent(new HoverEventContentsString(\"/bair generate\"))))\n" +
                ".addComponent(new Component(ChatColor.fromHex(\"#ffffff\"), \"Generates locations in advance!\").hoverEvent(new HoverEvent(new HoverEventContentsString(\"Pre-generation Allows you to reduce the load on the server!\"))));");
    }
}
